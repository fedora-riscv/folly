diff '--color=auto' -ruN folly-2022.02.28.00/folly/concurrency/test/AtomicSharedPtrTest.cpp folly-2022.02.28.00-skip_packed_sync_ptr_test_32bit/folly/concurrency/test/AtomicSharedPtrTest.cpp
--- folly-2022.02.28.00/folly/concurrency/test/AtomicSharedPtrTest.cpp	2022-02-26 12:09:52.000000000 -0800
+++ folly-2022.02.28.00-skip_packed_sync_ptr_test_32bit/folly/concurrency/test/AtomicSharedPtrTest.cpp	2022-03-03 14:23:08.787387376 -0800
@@ -18,7 +18,9 @@
 
 // AtomicSharedPtr-detail.h only works with libstdc++, so skip these tests for
 // other vendors
-#if defined(__GLIBCXX__)
+// PackedSyncPtr requires x64, ppc64 or aarch64, skip these tests for
+// other arches
+#if defined(__GLIBCXX__) && (FOLLY_X64 || FOLLY_PPC64 || FOLLY_AARCH64)
 
 #include <folly/concurrency/test/AtomicSharedPtrCounted.h>
 
diff '--color=auto' -ruN folly-2022.02.28.00/folly/concurrency/test/CoreCachedSharedPtrTest.cpp folly-2022.02.28.00-skip_packed_sync_ptr_test_32bit/folly/concurrency/test/CoreCachedSharedPtrTest.cpp
--- folly-2022.02.28.00/folly/concurrency/test/CoreCachedSharedPtrTest.cpp	2022-02-26 12:09:52.000000000 -0800
+++ folly-2022.02.28.00-skip_packed_sync_ptr_test_32bit/folly/concurrency/test/CoreCachedSharedPtrTest.cpp	2022-03-03 14:22:38.665221580 -0800
@@ -18,7 +18,9 @@
 
 // AtomicSharedPtr-detail.h only works with libstdc++, so skip these tests for
 // other vendors
-#if defined(__GLIBCXX__)
+// PackedSyncPtr requires x64, ppc64 or aarch64, skip these tests for
+// other arches
+#if defined(__GLIBCXX__) && (FOLLY_X64 || FOLLY_PPC64 || FOLLY_AARCH64)
 
 #include <atomic>
 #include <memory>
